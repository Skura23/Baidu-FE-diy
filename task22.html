<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
	div{
		border: 1px solid black;
		float: left;
		background: white;
	}
	.wra{
		width: 700px;
		height: 140px;
	}
	.layer0{
		margin: 20px 0 0 20px;
		width: 320px;
		height: 100px;
	}
	.layer1{
		margin: 10px 0 0 10px;
		width: 140px;
		height: 80px;
	}
	.layer2{
		margin: 10px 0 0 10px;
		width: 50px;
		height: 60px;
	}
	.colored{
		background: blue;
	}
	</style>
</head>
<body>
<div class="wra">
	<div class="layer0">
		<div class="layer1">
			<div class="layer2"></div>
			<div class="layer2"></div>
		</div>
		<div class="layer1">
			<div class="layer2"></div>
			<div class="layer2"></div>
		</div>
	</div>
	<div class="layer0">
		<div class="layer1">
			<div class="layer2"></div>
			<div class="layer2"></div>
		</div>
		<div class="layer1">
			<div class="layer2"></div>
			<div class="layer2"></div>
		</div>
	</div>
</div>
<button style="margin-left: 20px;">显示遍历</button>
<script type="text/javascript">
window.onload = function() {
	var btn = document.getElementsByTagName('button')[0];
	var aDiv = document.getElementsByTagName('div');
	function $(cla){
		return document.getElementsByClassName(cla);
	};
	var tmp = '';
	var k = i = 0;
	btn.onclick = function () {
		t = setInterval(addColor, 150)
	}

	//setTimeout只是延迟渲染，而不是延迟数据传递
	function addColor(){

		if(k != 0){
			aDiv[k-1].className = tmp;
		}
		//最后一个div的处理
		if(k == aDiv.length){
			clearInterval(t);
			//在此中断，后面不执行
			return;
		}
		//tmp存储原class名
		tmp = aDiv[k].className;
		//或者用for方法先初始化所有div的class名
		/*for(i = 0; i < aDiv.length; i++){
			aDiv[i].className = aDiv[i].className。replace(' colored', '');
		}*/
		aDiv[k].className += ' colored';
		k++;
	}
}
</script>
</body>
</html>